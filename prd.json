{
  "project": "Aether Protocol",
  "branchName": "ralph/aether-protocol-v1",
  "description": "Aether Protocol v1.0 - decentralized binary messaging for autonomous agents",
  "userStories": [
    {
      "id": "JD-001",
      "title": "Create core protocol spec document",
      "description": "As a protocol engineer, I want a spec-first protocol document so implementations can follow a single source of truth.",
      "acceptanceCriteria": [
        "Add `spec/protocol.md` with sections for Event Structure, Event Kinds, Tag Filtering, Transport, and Validation",
        "Document field types and limits for `event_id`, `pubkey`, `kind`, `created_at`, `tags`, `content`, `sig`",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Added spec/protocol.md covering required sections and field limits."
    },
    {
      "id": "JD-002",
      "title": "Define FlatBuffers schema for events",
      "description": "As a protocol engineer, I want a FlatBuffers schema so events can be serialized consistently across SDKs.",
      "acceptanceCriteria": [
        "Add `spec/schema.fbs` defining `Event` and `Tag` tables with fields matching PRD FR-1",
        "Schema uses fixed-size byte vectors for `event_id`, `pubkey`, and `sig`",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Added spec/schema.fbs with Event/Tag tables and fixed-size byte vectors."
    },
    {
      "id": "JD-003",
      "title": "Add valid event test vectors",
      "description": "As a maintainer, I want shared valid test vectors so all implementations can verify signing and hashing.",
      "acceptanceCriteria": [
        "Add `spec/test-vectors/valid-events.yaml` with at least 3 valid events",
        "Each vector includes `pubkey`, `content`, `tags`, `created_at`, `kind`, `event_id`, and `sig`",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Added spec/test-vectors/valid-events.yaml with three valid events (empty tags, UTF-8 content)."
    },
    {
      "id": "JD-004",
      "title": "Add invalid event test vectors",
      "description": "As a maintainer, I want invalid test vectors so implementations can reject bad events consistently.",
      "acceptanceCriteria": [
        "Add `spec/test-vectors/invalid-events.yaml` with at least 3 invalid cases",
        "Invalid cases include at least one bad signature and one mismatched `event_id`",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Added spec/test-vectors/invalid-events.yaml with three invalid cases (bad signature, mismatched event_id, out-of-range kind)."
    },
    {
      "id": "JD-005",
      "title": "Scaffold Python relay package",
      "description": "As a developer, I want a Python relay package scaffold to start implementing relay features.",
      "acceptanceCriteria": [
        "Create `implementations/relay/pyproject.toml` and package directory `implementations/relay/aether_relay/`",
        "Include an importable `aether_relay/__init__.py` and a minimal `server.py` entrypoint",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Added implementations/relay/pyproject.toml with minimal setuptools config plus aether_relay package scaffold (__init__.py, server.py stub)."
    },
    {
      "id": "JD-006",
      "title": "Implement Python crypto utilities",
      "description": "As a developer, I want shared crypto utilities so event signing and verification are consistent.",
      "acceptanceCriteria": [
        "Add keypair generation, event_id computation, sign, and verify functions in `implementations/relay/aether_relay/crypto.py`",
        "Functions validate against vectors in `spec/test-vectors/valid-events.yaml`",
        "Add unit tests covering keygen, sign/verify, and event_id computation",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Added aether_relay/crypto.py with Blake3 event_id computation, Ed25519 keygen/sign/verify, tag normalization, and pytest coverage against valid event vectors plus roundtrip signing."
    },
    {
      "id": "JD-007",
      "title": "Add event validation logic",
      "description": "As a relay, I want to validate events so invalid or replayed messages are rejected.",
      "acceptanceCriteria": [
        "Add validation function enforcing signature, event_id match, and timestamp window (\u00b160s) in `implementations/relay/aether_relay/validation.py`",
        "Validation uses kind range policy (0-39999) and rejects out-of-range kinds",
        "Add unit tests for each validation failure case",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Added validation.py enforcing event_id match, signature verification, kind range, and timestamp window; added pytest coverage for failure cases and vectors."
    },
    {
      "id": "JD-008",
      "title": "Implement in-memory relay storage semantics",
      "description": "As a relay, I need storage semantics for immutable, replaceable, ephemeral, and parameterized events.",
      "acceptanceCriteria": [
        "Add in-memory store with insert/query logic for the four event kinds in `implementations/relay/aether_relay/storage/`",
        "Replaceable events overwrite prior events by `(pubkey, kind)`; parameterized events by `(pubkey, kind, d-tag)`",
        "Ephemeral events are not stored after broadcast",
        "Add unit tests covering each storage semantic",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Renamed replaceable/parameterized keys to satisfy mypy; added root package.json scripts and TypeScript pnpm lock so pnpm typecheck/test run."
    },
    {
      "id": "JD-009",
      "title": "Scaffold Python SDK package",
      "description": "As a developer, I want a Python SDK scaffold to build client features.",
      "acceptanceCriteria": [
        "Create `implementations/python-sdk/pyproject.toml` and package directory `implementations/python-sdk/aether/`",
        "Include `aether/__init__.py` and a minimal `client.py` stub with async connect/publish signatures",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Added implementations/python-sdk scaffold with pyproject.toml, aether package, __init__.py, and async Client stub in client.py."
    },
    {
      "id": "JD-010",
      "title": "Scaffold TypeScript SDK package",
      "description": "As a developer, I want a TypeScript SDK scaffold to build client features.",
      "acceptanceCriteria": [
        "Create `implementations/typescript-sdk/package.json` and `implementations/typescript-sdk/tsconfig.json`",
        "Add `src/client.ts` with exported client class stub and placeholder connect/publish methods",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "Added implementations/typescript-sdk scaffold with package.json, tsconfig.json, and src/client.ts stub (connect/publish)."
    },
    {
      "id": "JD-011",
      "title": "Add Python conformance test runner",
      "description": "As a maintainer, I want a conformance runner so Python implementations can validate against shared vectors.",
      "acceptanceCriteria": [
        "Add `implementations/relay/tests/test_vectors.py` to load YAML vectors and validate crypto + event_id",
        "Runner reads both valid and invalid vector files and asserts correct pass/fail behavior",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Added test_vectors.py conformance runner to validate event_id/signatures and reject invalid vectors (including kind range)."
    },
    {
      "id": "JD-012",
      "title": "Add CRDT helper stubs in Python SDK",
      "description": "As an SDK user, I want CRDT helper stubs so I can integrate counters and registers consistently.",
      "acceptanceCriteria": [
        "Add `aether/crdt/` with minimal classes for G-Counter, PN-Counter, LWW-Register, and OR-Set",
        "Each class exposes add/update/remove APIs with docstrings describing intended behavior",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "Added aether/crdt with minimal GCounter, PNCounter, LWWRegister, and ORSet helpers plus tests."
    },
    {
      "id": "JD-013",
      "title": "Make root checks self-contained",
      "description": "As a maintainer, I want root checks to provision Python dev deps so typecheck/test run without manual setup.",
      "acceptanceCriteria": [
        "Add a script to create a local venv and install relay/SDK dev extras",
        "Root `pnpm typecheck` and `pnpm test` use the script for Python tooling",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 13,
      "passes": true,
      "notes": "Added scripts/python-dev.sh to provision a local venv and install dev extras; root pnpm scripts now use it."
    }
  ]
}
